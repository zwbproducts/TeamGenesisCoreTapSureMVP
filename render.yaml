services:
  - type: web
    name: tapsure-backend
    env: python
    plan: free
    buildCommand: "pip install -r backend/requirements.txt"
    startCommand: "PYTHONPATH=backend uvicorn app.main:app --host 0.0.0.0 --port $PORT"
    autoDeploy: true
    envVars:
      - key: POS_QR_ENFORCEMENT
        value: "on"
      - key: POS_QR_MAX_AGE_SECONDS
        value: "900"
      - key: POS_QR_NONCE_TTL_SECONDS
        value: "3600"
      # Replace with your tenant secrets JSON (required for QR auth)
      - key: POS_TENANT_SECRETS
        value: '{"user1":"secret1","user2":"secret2","user3":"secret3"}'
      # Optional: provide an OpenAI-compatible key/base URL/model for smarter chat
      # - key: OPENAI_API_KEY
      #   value: ""
      # - key: LLM_BASE_URL
      #   value: ""
      # - key: LLM_MODEL
      #   value: "llama3.1:8b"
    healthCheckPath: /health
    repo: https://github.com/zeroturnnew-sudo/TapSure-AI-app-Network
    branch: main
